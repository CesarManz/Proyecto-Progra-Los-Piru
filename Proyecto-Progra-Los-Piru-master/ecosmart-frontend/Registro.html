<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Crear Usuario - Test</title>
    <link rel="stylesheet" href="Estilo-login.css">
</head>
<header>
    <div class="logo">
        <img class= "ecosmart" src="public/EcoSmart2.png" >
        </img></div>
</header>
<body>
<<<<<<< HEAD
<div class="logo-container">
    <img src="public/EcoSmart2.png" alt="EcoSmart Logo" class="logo">
</div>


=======
>>>>>>> b54e40e2ac6af9d3a2bb472abcd40b8a1c629616
<form id="registroForm">
    <h2>Formulario de Registro</h2>
    <label>Nombre:<br><input type="text" name="nombre" required></label><br><br>
    <label>Correo:<br><input type="email" name="correo" required></label><br><br>
    <label>Contraseña:<br><input type="password" name="contraseña" required></label><br><br>
    <label>Trabajo:<br>
        <select name="trabajo" required>
            <option value="">Seleccione una opción</option>
            <option value="agronomo">Agrónomo</option>
            <option value="tecnico">Técnico</option>
            <option value="agricultor">Agricultor</option>
        </select>
    </label><br><br>
    <button type="submit">Registrar</button>
</form>

<p id="respuesta"></p>

<script>
    const form = document.getElementById('registroForm');
    const respuesta = document.getElementById('respuesta');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const datos = {
            nombre: form.nombre.value,
            correo: form.correo.value,
            contraseña: form.contraseña.value,
            trabajo: form.trabajo.value
        };

        try {
            const res = await fetch('http://localhost:5000/api/usuarios', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(datos)
            });

            const data = await res.json();
            if (res.ok) {
                // Redirigir al login después del registro exitoso
                window.location.href = 'Login.html';
            } else {
                respuesta.textContent = data.mensaje;
                respuesta.style.color = 'red';
            }
        } catch (error) {
            respuesta.textContent = 'Error al conectar con el servidor';
            respuesta.style.color = 'red';
        }
    });
</script>
</body>
</html>
